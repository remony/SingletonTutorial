/*! rekapi - v1.4.4 - 2015-01-01 - http://rekapi.com */
!function(a){function b(a,b,c,d){c.each(a._events[b],function(b){b(a,d)})}function c(a,b){var c=[];b.each(a._actors,function(a){c.push(a.getEnd())}),a._animationLength=Math.max.apply(Math,c)}function d(){}var e=[],f=function(d,e,f){"use strict";function g(a,b){var c=a._animationLength;if(0===c)return b;var d=Math.floor(b/c);return d}function h(a){return t()-a._loopTimestamp}function i(a,b){return b>=a._timesToIterate&&-1!==a._timesToIterate}function j(a,c){i(a,c)&&(a.stop(),b(a,"animationComplete",e))}function k(a,b,c){var d,e=a._animationLength;return 0===e?0:d=i(a,c)?e:b%e}function l(a,c){var d=0,f=0;f=g(a,c),d=k(a,c,f),a._loopPosition=d;var h=[];if(f>a._latestIteration){b(a,"animationLooped",e);var i={name:"function"};e.each(a._actors,function(a){var b=e.where(a._keyframeProperties,i),c=e.last(b);c&&!c.hasFired&&c.invoke(),h=h.concat(b)})}a._latestIteration=f,a.update(d),j(a,f),e.each(h,function(a){a.hasFired=!1})}function m(a){l(a,h(a))}function n(b){b._loopId=b._scheduleUpdate.call?b._scheduleUpdate.call(a,b._updateFn,s):setTimeout(b._updateFn,s)}function o(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||a.mozCancelRequestAnimationFrame&&a.mozRequestAnimationFrame||a.setTimeout}function p(){return a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.oCancelAnimationFrame||a.msCancelAnimationFrame||a.mozCancelRequestAnimationFrame||a.clearTimeout}function q(b){b._cancelUpdate.call?b._cancelUpdate.call(a,b._loopId):clearTimeout(b._loopId)}function r(a){return this.context=a||{},this._actors={},this._playState=u.STOPPED,this._events={animationComplete:[],playStateChange:[],play:[],pause:[],stop:[],beforeUpdate:[],afterUpdate:[],addActor:[],removeActor:[],addKeyframeProperty:[],removeKeyframeProperty:[],addKeyframePropertyTrack:[],timelineModified:[],animationLooped:[]},this._timesToIterate=-1,this._animationLength=0,this._loopId=null,this._loopTimestamp=null,this._pausedAtTime=null,this._lastUpdatedMillisecond=0,this._latestIteration=0,this._loopPosition=null,this._scheduleUpdate=o(),this._cancelUpdate=p(),this._updateFn=e.bind(function(){n(this),m(this)},this),e.each(r._rendererInitHook,function(a){a(this)},this),this}var s=1e3/60,t=f.now,u={STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing"};r.Tweenable=f,r._=e,r._rendererInitHook={},r.prototype.addActor=function(a){var d;return d=a instanceof r.Actor?a:new r.Actor(a),e.contains(this._actors,d)||("undefined"==typeof d.context&&(d.context=this.context),d.rekapi=this,this._actors[d.id]=d,c(this,e),d.setup(),b(this,"addActor",e,d)),d},r.prototype.getActor=function(a){return this._actors[a]},r.prototype.getActorIds=function(){return e.pluck(this._actors,"id")},r.prototype.getAllActors=function(){return e.clone(this._actors)},r.prototype.getActorCount=function(){return e.size(this._actors)},r.prototype.removeActor=function(a){return delete this._actors[a.id],delete a.rekapi,a.teardown(),c(this,e),b(this,"removeActor",e,a),a},r.prototype.play=function(a){return q(this),this._playState===u.PAUSED?this._loopTimestamp+=t()-this._pausedAtTime:this._loopTimestamp=t(),this._timesToIterate=a||-1,this._playState=u.PLAYING,n(this),b(this,"playStateChange",e),b(this,"play",e),this},r.prototype.playFrom=function(a,b){return this.play(b),this._loopTimestamp=t()-a,this},r.prototype.playFromCurrent=function(a){return this.playFrom(this._lastUpdatedMillisecond,a)},r.prototype.pause=function(){return this._playState===u.PAUSED?this:(this._playState=u.PAUSED,q(this),this._pausedAtTime=t(),b(this,"playStateChange",e),b(this,"pause",e),this)},r.prototype.stop=function(){return this._playState=u.STOPPED,q(this),e.each(this._actors,function(a){a.stop()}),b(this,"playStateChange",e),b(this,"stop",e),this},r.prototype.isPlaying=function(){return this._playState===u.PLAYING},r.prototype.update=function(a){return void 0===a&&(a=this._lastUpdatedMillisecond),b(this,"beforeUpdate",e),e.each(this._actors,function(b){b._updateState(a),"function"==typeof b.render&&b.render(b.context,b.get())}),this._lastUpdatedMillisecond=a,b(this,"afterUpdate",e),this},r.prototype.getLastPositionUpdated=function(){return this._lastUpdatedMillisecond/this._animationLength},r.prototype.getAnimationLength=function(){return this._animationLength},r.prototype.on=function(a,b){return this._events[a]?(this._events[a].push(b),this):void 0},r.prototype.off=function(a,b){return this._events[a]?(this._events[a]=b?e.without(this._events[a],b):[],this):void 0},r.prototype.exportTimeline=function(){var a={duration:this._animationLength,actors:[]};return e.each(this._actors,function(b){a.actors.push(b.exportTimeline())},this),a},r.prototype.importTimeline=function(a){e.each(a.actors,function(a){var b=new r.Actor;b.importTimeline(a),this.addActor(b)},this)},r.util={},d.Rekapi=r};e.push(function(a){"use strict";function e(a){return a.sort(function(a,b){return a-b})}function f(a,c){a.rekapi&&b(a.rekapi,c,r)}function g(a,b){var c,d=a._timelinePropertyCacheKeys,e=d.length;if(1===e)return 0;for(c=1;e>c;c++)if(d[c]>=b)return c-1;return-1}function h(a){r.each(a._propertyTracks,function(a){a.sort(function(a,b){return a.millisecond-b.millisecond})})}function i(a){r.each(a._timelinePropertyCache,function(b,c){var d=j(a,c);r.defaults(b,d)})}function j(a,b){var c={};return r.each(a._propertyTracks,function(a,d){var e,f=a[0]||null,g=0,h=a.length;for(g;h>g&&(e=a[g],e.millisecond>b?c[d]=f:e.millisecond===b&&(c[d]=e),f=e,!c[d]);g++);if(!c[d]){var i=r.last(a);i&&i.millisecond<=b&&(c[d]=i)}}),c}function k(a){r.each(a._propertyTracks,function(a){r.each(a,function(b,c){b.linkToNext(a[c+1])})})}function l(a,b,c){return r.findWhere(a._propertyTracks[b],{millisecond:c})}function m(a){a._timelinePropertyCache={};var b,c=a._timelinePropertyCache;r.each(a._keyframeProperties,function(a){b=a.millisecond,c[b]||(c[b]={}),c[b][a.name]=a}),a._timelinePropertyCacheKeys=r.map(c,function(a,b){return+b}),e(a._timelinePropertyCacheKeys),i(a),k(a)}function n(a){h(a),m(a),c(a.rekapi,r),f(a,"timelineModified")}var o="linear",p=a.Rekapi,q=p.Tweenable,r=p._;p.Actor=function(a){return a=a||{},q.call(this),r.extend(this,{_propertyTracks:{},_timelinePropertyCache:{},_timelinePropertyCacheKeys:[],_keyframeProperties:{},id:r.uniqueId(),context:a.context,setup:a.setup||d,render:a.render||d,teardown:a.teardown||d,data:{}}),this};var s=p.Actor,t=function(){};t.prototype=q.prototype,s.prototype=new t,s.prototype.keyframe=function(a,b,d){b instanceof Function&&(b={"function":b}),d=d||o;var e,g=q.composeEasingObject(b,d);return r.each(b,function(b,c){e=new p.KeyframeProperty(a,c,b,g[c]),this._addKeyframeProperty(e)},this),this.rekapi&&c(this.rekapi,r),m(this),f(this,"timelineModified"),this},s.prototype.hasKeyframeAt=function(a,b){var c=this._propertyTracks;if(b){if(!r.has(c,b))return!1;c=r.pick(c,b)}var d;for(d in c)if(c.hasOwnProperty(d)&&l(this,d,a))return!0;return!1},s.prototype.copyKeyframe=function(a,b){var c={},d={};return r.each(this._propertyTracks,function(a,e){var f=l(this,e,b);f&&(c[e]=f.value,d[e]=f.easing)},this),this.keyframe(a,c,d),this},s.prototype.moveKeyframe=function(a,b){return!this.hasKeyframeAt(a)||this.hasKeyframeAt(b)?!1:(r.each(this._propertyTracks,function(c,d){var e=l(this,d,a);e&&(e.millisecond=b)},this),n(this),!0)},s.prototype.modifyKeyframe=function(a,b,c){return c=c||{},r.each(this._propertyTracks,function(d,e){var f=l(this,e,a);f&&f.modifyWith({value:b[e],easing:c[e]})},this),n(this),this},s.prototype.removeKeyframe=function(a){var b=this._propertyTracks;return r.each(this._propertyTracks,function(c,d){var e=r.findWhere(c,{millisecond:a});e&&(b[d]=r.without(c,e),e.detach())},this),this.rekapi&&c(this.rekapi,r),m(this),f(this,"timelineModified"),this},s.prototype.removeAllKeyframes=function(){return r.each(this._propertyTracks,function(a){a.length=0}),r.each(this._keyframeProperties,function(a){a.detach()},this),this._keyframeProperties={},this.removeKeyframe(0)},s.prototype.getKeyframeProperty=function(a,b){var c=this._propertyTracks[a];return c?r.findWhere(c,{millisecond:b}):void 0},s.prototype.modifyKeyframeProperty=function(a,b,c){var d=this.getKeyframeProperty(a,b);return d&&(d.modifyWith(c),n(this)),this},s.prototype.removeKeyframeProperty=function(a,b){var c=this._propertyTracks;if("undefined"!=typeof c[a]){var d=this.getKeyframeProperty(a,b);return c[a]=r.without(c[a],d),d.detach(),n(this),d}},s.prototype.getTrackNames=function(){return r.keys(this._propertyTracks)},s.prototype.getPropertiesInTrack=function(a){var b=this._propertyTracks[a];return b?b.slice(0):void 0},s.prototype.getStart=function(a){var b=[],c=this._propertyTracks;if(c.hasOwnProperty(a)){var d=c[a][0];d&&b.push(d.millisecond)}else r.each(c,function(a){a.length&&b.push(a[0].millisecond)});0===b.length&&(b=[0]);var e;return e=b.length>0?Math.min.apply(Math,b):0},s.prototype.getEnd=function(a){var b=0,c=this._propertyTracks;return a&&(c={},c[a]=this._propertyTracks[a]),r.each(c,function(a){if(a.length){var c=r.last(a).millisecond;c>b&&(b=c)}},this),b},s.prototype.getLength=function(a){return this.getEnd(a)-this.getStart(a)},s.prototype.wait=function(a){var b=this.getEnd();if(b>=a)return this;var c=this.getEnd(),d=j(this,this.getEnd()),e={},f={};return r.each(d,function(a,b){e[b]=a.value,f[b]=a.easing}),this.removeKeyframe(c),this.keyframe(c,e,f),this.keyframe(a,e,f),this},s.prototype._addKeyframeProperty=function(a){a.actor=this,this._keyframeProperties[a.id]=a;var c=a.name,d=this._propertyTracks;return"undefined"==typeof this._propertyTracks[c]?(d[c]=[a],this.rekapi&&b(this.rekapi,"addKeyframePropertyTrack",r,a)):d[c].push(a),h(this),this.rekapi&&b(this.rekapi,"addKeyframeProperty",r,a),this},s.prototype._updateState=function(a){var b=this.getStart(),c=this.getEnd(),e={};a=Math.min(c,a);var f=g(this,a),h=this._timelinePropertyCache[this._timelinePropertyCacheKeys[f]];return b===c?r.each(h,function(b,c){return b.shouldInvokeForMillisecond(a)?(b.invoke(),void(b.hasFired=!1)):void(e[c]=b.value)},this):r.each(h,function(b,c){return this._beforeKeyframePropertyInterpolate!==d&&this._beforeKeyframePropertyInterpolate(b),b.shouldInvokeForMillisecond(a)?void b.invoke():(e[c]=b.getValueAt(a),void(this._afterKeyframePropertyInterpolate!==d&&this._afterKeyframePropertyInterpolate(b,e)))},this),this.set(e),this},s.prototype._beforeKeyframePropertyInterpolate=d,s.prototype._afterKeyframePropertyInterpolate=d,s.prototype.exportTimeline=function(){var a={start:this.getStart(),end:this.getEnd(),trackNames:this.getTrackNames(),propertyTracks:{}};return r.each(this._propertyTracks,function(b,c){var d=a.propertyTracks[c]=[];r.each(b,function(a){d.push(a.exportPropertyData())})}),a},s.prototype.importTimeline=function(a){r.each(a.propertyTracks,function(a){r.each(a,function(a){var b={};b[a.name]=a.value,this.keyframe(a.millisecond,b,a.easing)},this)},this)}}),e.push(function(a){"use strict";var c="linear",d=a.Rekapi,e=d.Tweenable,f=d._,g=e.interpolate;d.KeyframeProperty=function(a,b,d,e){return this.id=f.uniqueId("keyframeProperty_"),this.millisecond=a,this.name=b,this.value=d,this.hasFired=null,this.easing=e||c,this.nextProperty=null,this};var h=d.KeyframeProperty;h.prototype.modifyWith=function(a){var b={};f.each(["millisecond","easing","value"],function(c){b[c]="undefined"==typeof a[c]?this[c]:a[c]},this),f.extend(this,b)},h.prototype.getValueAt=function(a){var b,c={},d={},e=this.nextProperty,f=Math.max(a,this.millisecond);if(e){f=Math.min(f,e.millisecond),c[this.name]=this.value,d[this.name]=e.value;var h=e.millisecond-this.millisecond,i=(f-this.millisecond)/h;b=g(c,d,i,e.easing)[this.name]}else b=this.value;return b},h.prototype.linkToNext=function(a){this.nextProperty=a||null},h.prototype.detach=function(){var a=this.actor;return a&&a.rekapi&&(b(a.rekapi,"removeKeyframeProperty",f,this),delete a._keyframeProperties[this.id],this.actor=null),this},h.prototype.exportPropertyData=function(){return{millisecond:this.millisecond,name:this.name,value:this.value,easing:this.easing}},h.prototype.shouldInvokeForMillisecond=function(a){return a>=this.millisecond&&"function"===this.name&&!this.hasFired},h.prototype.invoke=function(){var a=this.actor.rekapi._loopPosition-this.millisecond,b=this.value.call(this.actor,a);return this.hasFired=!0,b}}),e.push(function(a){"use strict";function c(a,b,c){return"undefined"!=typeof c&&(a[b]=c,a.style[b]=c+"px"),a[b]}function d(a){a.clear()}function e(a,c){b(a,"beforeRender",i);var d,e=c._renderOrderSorter,f=c._renderOrder.length;if(e){var g=i.sortBy(c._canvasActors,e);d=i.pluck(g,"id")}else d=c._renderOrder;var h,j,k=c._canvasActors;for(j=0;f>j;j++)h=k[d[j]],h.render(h.context,h.get());return b(a,"afterRender",i),a}function f(a,b){b._renderOrder.push(a.id),b._canvasActors[a.id]=a}function g(a,b){b._renderOrder=i.without(b._renderOrder,a.id),delete b._canvasActors[a.id]}var h=a.Rekapi,i=h._;h._rendererInitHook.canvas=function(a){"undefined"!=typeof CanvasRenderingContext2D&&a.context instanceof CanvasRenderingContext2D&&(a.renderer=new j(a))},h.CanvasRenderer=function(a,b){this.rekapi=a,this.canvasContext=b||a.context,this._renderOrder=[],this._renderOrderSorter=null,this._canvasActors={},i.extend(a._events,{beforeRender:[],afterRender:[]});var c=this;return a.on("afterUpdate",function(){e(a,c)}),a.on("addActor",function(a,b){f(b,c)}),a.on("removeActor",function(a,b){g(b,c)}),a.on("beforeRender",function(){d(c)}),this};var j=h.CanvasRenderer;j.prototype.height=function(a){return c(this.canvasContext.canvas,"height",a)},j.prototype.width=function(a){return c(this.canvasContext.canvas,"width",a)},j.prototype.clear=function(){return this.canvasContext.clearRect(0,0,this.width(),this.height()),this.rekapi},j.prototype.moveActorToLayer=function(a,b){return b<this._renderOrder.length&&b>-1&&(this._renderOrder=i.without(this._renderOrder,a.id),this._renderOrder.splice(b,0,a.id)),a},j.prototype.setOrderFunction=function(a){return this._renderOrderSorter=a,this.rekapi},j.prototype.unsetOrderFunction=function(){return this._renderOrderSorter=null,this.rekapi}}),e.push(function(a){"use strict";function c(a){return a%1===0}function d(){var a=document.body.style;return"-webkit-animation"in a?"webkit":"-moz-animation"in a?"mozilla":"-ms-animation"in a?"microsoft":"-o-animation"in a?"opera":"animation"in a?"w3":""}function e(a,b){var c=document.createElement("style"),d="rekapi-"+V++;return c.id=d,c.innerHTML=b,document.head.appendChild(c),f(a),c}function f(a){var b=document.createElement("div");P.each(a.getAllActors(),function(a){if(1===a.context.nodeType){var c=a.context,d=c.parentElement;d.replaceChild(b,c),d.replaceChild(c,b)}}),b=null}function g(a,b,c){a.style[b]=c}function h(a){return P.contains(S,a)}function i(a,b){var c=[];return P.each(a,function(a){b[a]&&c.push(a+"("+b[a]+")")}),c.join(" ")}function j(a,b){P.each(R,function(c){g(a,c,b)})}function k(a,b){var c=b.context;if(1===c.nodeType){var d=W.getActorClassName(b);c.className.match(d)||(c.className+=" "+d),b._transformOrder=S.slice(0),b._beforeKeyframePropertyInterpolate=l,b._afterKeyframePropertyInterpolate=m,b.render=P.bind(n,b,b),b.teardown=P.bind(o,b,b)}}function l(a){if("transform"===a.name){var b=a.value,c=a.nextProperty;c&&b.match(/3d\(/g)&&(a.value=b.replace(/3d\(/g,"__THREED__"),c.value=c.value.replace(/3d\(/g,"__THREED__"))}}function m(a,b){if("transform"===a.name){var c=a.value,d=a.nextProperty;if(d&&c.match(/__THREED__/g)){a.value=c.replace(/__THREED__/g,"3d("),d.value=d.value.replace(/__THREED__/g,"3d(");var e=a.name;b[e]=b[e].replace(/__THREED__/g,"3d(")}}}function n(a,b,c){var d=P.keys(c),e=P.filter(d,h),f=P.reject(d,h),k=P.pick(c,f);if(e.length){var l=P.pick(c,e),m=i(a._transformOrder,l);j(b,m)}else c.transform&&j(b,c.transform);P.each(k,function(a,c){g(b,c,a)})}function o(a){var b=a.context,c=b.className.match(/\S+/g),d=P.without(c,W.getActorClassName(a));b.className=d.join(" ")}function p(a,b){b=b||{};var c=[],d=b.name||W.getActorClassName(a),e=b.fps||X,f=Math.ceil(a.rekapi.getAnimationLength()/1e3*e),g=!E(a),h=t(a,d,g,b.vendors,b.iterations,b.isCentered),i=q(a,d,f,g,b.vendors);return c.push(h),c.push(i),c.join("\n")}function q(a,b,c,d,e){var f=a.getTrackNames(),g=[];d?g.push(H(a,c)):P.each(f,function(b){g.push(G(a,c,b))});var h=[];return d?h.push(r(g[0],b,e)):P.each(f,function(a,c){h.push(r(g[c],b+"-"+a,e))}),h=h.join("\n")}function r(a,b,c){c=c||["w3"];var d=[];return P.each(c,function(c){var e=U(ab,[$[c],b,a]),f=s(e,c);d.push(f)}),d.join("\n")}function s(a,b){var c=new RegExp(Y,"g"),d=$[b]+"transform",e=new RegExp(Z,"g"),f=$[b],g=a.replace(e,f).replace(c,d);return g}function t(a,b,c,d,e,f){d=d||["w3"];var g,h=[];P.each(d,function(d){g=u(a,b,d,c,e,f),h.push(g)});var i=U(bb,[b,h.join("\n")]);return i}function u(a,b,c,d,e,f){var g=[],h=$[c];return g.push(v(a,b,h,d)),g.push(w(a,h)),g.push(x(a,h)),g.push(y(h)),g.push(z(h)),g.push(A(a.rekapi,h,e)),f&&g.push(B(h)),g.join("\n")}function v(a,b,c,d){var e=U("  %sanimation-name:",[c]),f=a.getTrackNames();return d?e+=U(" %s-keyframes;",[b]):(P.each(f,function(a){e+=U(" %s-%s-keyframes,",[b,a])}),e=e.slice(0,e.length-1),e+=";"),e}function w(a,b){return U("  %sanimation-duration: %sms;",[b,a.getEnd()-a.getStart()])}function x(a,b){return U("  %sanimation-delay: %sms;",[b,a.getStart()])}function y(a){return U("  %sanimation-fill-mode: forwards;",[a])}function z(a){return U("  %sanimation-timing-function: linear;",[a])}function A(a,b,c){var d;d=c?c:-1===a._timesToIterate?"infinite":a._timesToIterate;var e="  %sanimation-iteration-count: %s;";return U(e,[b,d])}function B(a){return U("  %stransform-origin: 0 0;",[a])}function C(a){var b=!1,c=a.nextProperty;if(c){if(D(a,c))return!0;var d,e=c.easing.split(" "),f=0,g=e.length,h=e[0];for(f;g>f;f++){if(d=e[f],!_[d]||h!==d){b=!1;break}b=!0,h=d}}return b}function D(a,b){return a.name===b.name&&a.value===b.value?!0:!1}function E(a){return P.any(a._keyframeProperties,C)}function F(a,b,d){var e=[],f=a.name;"transform"===a.name&&(f=Y);var g=_[a.nextProperty.easing.split(" ")[0]],h=U("cubic-bezier(%s)",[g]),i=c(b)?b:b.toFixed(2),j=c(d)?d:d.toFixed(2);return e.push(U("  %s% {%s:%s;%sanimation-timing-function: %s;}",[i,f,a.value,Z,h])),e.push(U("  %s% {%s:%s;}",[j,f,a.nextProperty.value])),e.join("\n")}function G(a,b,c){var d=[],e=a.getEnd(),f=a.getStart(),g=a.getLength(),h=I(a,c,f);h&&d.push(h);var i=!1;P.each(a._propertyTracks[c],function(c){var e,h,j,k=K(c,f,g),l=c.nextProperty;if(l){e=K(l,f,g);var m=e-k;h=Math.floor(m/100*b)||1,j=m/h}else e=100,h=1,j=1;var n;if(l&&D(c,l))n=M(a,f,c,l,k,e),i&&n.shift(),i=!1;else if(C(c)){if(n=F(c,k,e),i){var o=d.length,p=d[o-1],q=p.split("\n")[0];d[o-1]=q}i=!0}else n=L(a,h,j,f,k,c),i&&n.shift(),n.length&&(n=n.join("\n")),i=!1;n.length&&d.push(n)});var j=J(a,c,f,e);return j&&d.push(j),d.join("\n")}function H(a,b){return L(a,b+1,100/b,0,0).join("\n")}function I(a,b,c){var d=a._propertyTracks[b][0];if("undefined"!=typeof d&&d.millisecond!==c){var e=L(a,1,1,d.millisecond,0,d);return e.join("\n")}}function J(a,b,c,d){var e=P.last(a._propertyTracks[b]);if("undefined"!=typeof e&&e.millisecond!==d){var f=L(a,1,1,c,100,e);return f.join("\n")}}function K(a,b,c){return(a.millisecond-b)/c*100}function L(a,b,c,d,e,f){var g,h,i,j=[],k=a.getLength();for(g=0;b>g;g++)h=e+g*c,a._updateState(h/100*k+d),i=+h.toFixed(2)+"% ",j.push(f?"  "+i+N(a,f.name):"  "+i+N(a));return j}function M(a,b,c,d,e,f){var g=L(a,1,f-e,b,e,c);return g}function N(a,b){var c,d=["{"];if(b){c={};var e=a.get()[b];"undefined"!=typeof e&&(c[b]=e)}else c=a.get();var f;return P.each(c,function(a,b){f=a;var c=b;"transform"===b&&(c=Y),d.push(c+":"+f+";")}),d.push("}"),d.join("")}var O=a.Rekapi,P=O._,Q=O.Tweenable.now,R=["transform","webkitTransform","MozTransform","oTransform","msTransform"],S=["translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","skewX","skewY"],T=250,U=function(a,b){var c=a;return P.each(b,function(a){c=c.replace("%s",a)}),c};O._rendererInitHook.cssAnimate=function(a){1===a.context.nodeType&&(a.renderer=new W(a))};var V=0;O.DOMRenderer=function(a){return this.rekapi=a,this._playTimestamp=null,this._cachedCSS=null,this._styleElement=null,this._stopSetTimeoutHandle=null,a.on("timelineModified",P.bind(function(){this._cachedCSS=null},this)),a.on("addActor",k),this};var W=O.DOMRenderer;W.prototype.canAnimateWithCSS=function(){return!!d()},W.prototype.play=function(a){this.isPlaying()&&this.stop();var c=this._cachedCSS||this.prerender.apply(this,arguments);if(this._styleElement=e(this.rekapi,c),this._playTimestamp=Q(),a){var d=a*this.rekapi.getAnimationLength();this._stopSetTimeoutHandle=setTimeout(P.bind(this.stop,this,!0),d+T)}b(this.rekapi,"play",P)},W.prototype.stop=function(a){if(this.isPlaying()){clearTimeout(this._stopSetTimeoutHandle),this._styleElement.innerHTML="",document.head.removeChild(this._styleElement),this._styleElement=null;var c;c=a?this.rekapi.getAnimationLength():(Q()-this._playTimestamp)%this.rekapi.getAnimationLength(),this.rekapi.update(c),b(this.rekapi,"stop",P)}},W.prototype.isPlaying=function(){return!!this._styleElement},W.prototype.prerender=function(a,b){return this._cachedCSS=this.toString({vendors:[d()],fps:b,iterations:a})},W.prototype.setActorTransformOrder=function(a,b){var c=P.reject(b,h);if(c.length)throw"Unknown or unsupported transform functions: "+c.join(", ");return a._transformOrder=P.uniq(b),this.rekapi},W.getActorClassName=function(a){return"actor-"+a.id},O.DOMRenderer.prototype.toString=function(a){a=a||{};var b=[];return P.each(this.rekapi.getAllActors(),function(c){1===c.context.nodeType&&b.push(p(c,a))}),b.join("\n")};var X=30,Y="TRANSFORM",Z="VENDOR",$={microsoft:"-ms-",mozilla:"-moz-",opera:"-o-",w3:"",webkit:"-webkit-"},_={linear:".25,.25,.75,.75",easeInQuad:".55,.085,.68,.53",easeInCubic:".55,.055,.675,.19",easeInQuart:".895,.03,.685,.22",easeInQuint:".755,.05,.855,.06",easeInSine:".47,0,.745,.715",easeInExpo:".95,.05,.795,.035",easeInCirc:".6,.04,.98, .335",easeOutQuad:".25,.46,.45,.94",easeOutCubic:".215,.61,.355,1",easeOutQuart:".165,.84,.44,1",easeOutQuint:".23,1,.32,1",easeOutSine:".39,.575,.565,1",easeOutExpo:".19,1,.22,1",easeOutCirc:".075,.82,.165,1",easeInOutQuad:".455,.03,.515,.955",easeInOutCubic:".645,.045,.355,1",easeInOutQuart:".77,0,.175,1",easeInOutQuint:".86,0.07,1",easeInOutSine:".445,.05,.55,.95",easeInOutExpo:"1,0,0,1",easeInOutCirc:".785,.135,.15,.86"},ab=["@%skeyframes %s-keyframes {","%s","}"].join("\n"),bb=[".%s {","%s","}"].join("\n")});var g=function(a,b){"use strict";var c=b?{}:a,d=b&&b.underscore?b.underscore:c._,g=b&&b.Tweenable?b.Tweenable:c.Tweenable;return f(c,d,g),d.each(e,function(a){a(c)}),c.Rekapi};if("function"==typeof define&&define.amd){var h="undefined"!=typeof _;define(["shifty","underscore"],function(a,b){var c=null!=b,d={Tweenable:a,underscore:c?b:_},e=g({},d);return!h&&c&&(this._=void 0),e})}else g(this)}(this);